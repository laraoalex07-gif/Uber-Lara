<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="LaraApp7 - Multi Servicios de Transporte">
    <meta name="theme-color" content="#10b981">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>LaraApp7 - Multi Servicios</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        * { font-family: 'Inter', sans-serif; margin: 0; padding: 0; box-sizing: border-box; }
        body { overflow-x: hidden; }
        .dark { color-scheme: dark; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
        const { useState, useEffect } = React;

        const Icons = {
            Home: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>,
            DollarSign: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
            Calendar: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>,
            Users: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
            FileText: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>,
            Settings: () => <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>,
            Plus: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" /></svg>,
            Trash2: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>,
            Check: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" /></svg>,
            Moon: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>,
            Sun: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>,
            Camera: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>,
            LogOut: () => <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>,
            Edit2: () => <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" /></svg>
        };

        function LaraApp() {
            const [currentView, setCurrentView] = useState('login');
            const [darkMode, setDarkMode] = useState(() => {
                const saved = localStorage.getItem('darkMode');
                return saved ? JSON.parse(saved) : false;
            });
            
            const [appSettings, setAppSettings] = useState(() => {
                const saved = localStorage.getItem('appSettings');
                return saved ? JSON.parse(saved) : {
                    nombre: 'LaraApp7\nMULTI SERVICIOS LARA',
                    eslogan: 'Servicio de transporte privado',
                    detalle: 'Moviendo vidas',
                    logo: null
                };
            });

            const [registros, setRegistros] = useState(() => {
                const saved = localStorage.getItem('registros');
                return saved ? JSON.parse(saved) : [];
            });

            const [viajes, setViajes] = useState(() => {
                const saved = localStorage.getItem('viajes');
                return saved ? JSON.parse(saved) : [];
            });

            const [clientes, setClientes] = useState(() => {
                const saved = localStorage.getItem('clientes');
                return saved ? JSON.parse(saved) : [];
            });

            const [deudas, setDeudas] = useState(() => {
                const saved = localStorage.getItem('deudas');
                return saved ? JSON.parse(saved) : [];
            });

            const [pagosDeudas, setPagosDeudas] = useState(() => {
                const saved = localStorage.getItem('pagosDeudas');
                return saved ? JSON.parse(saved) : [];
            });

            const [diezmos, setDiezmos] = useState(() => {
                const saved = localStorage.getItem('diezmos');
                return saved ? JSON.parse(saved) : [];
            });

            const [cuentasFinancieras, setCuentasFinancieras] = useState(() => {
                const saved = localStorage.getItem('cuentasFinancieras');
                return saved ? JSON.parse(saved) : [];
            });

            const [notas, setNotas] = useState(() => {
                const saved = localStorage.getItem('notas');
                return saved ? JSON.parse(saved) : [];
            });

            const [categorias, setCategorias] = useState(() => {
                const saved = localStorage.getItem('categorias');
                return saved ? JSON.parse(saved) : [
                    'Uber diario', 'Uber semanal', 'Gasolina', 'Internet',
                    'Privado', 'Mantenimiento carro', 'Renta CARRO', 'Otros'
                ];
            });

            useEffect(() => { localStorage.setItem('darkMode', JSON.stringify(darkMode)); }, [darkMode]);
            useEffect(() => { localStorage.setItem('appSettings', JSON.stringify(appSettings)); }, [appSettings]);
            useEffect(() => { localStorage.setItem('registros', JSON.stringify(registros)); }, [registros]);
            useEffect(() => { localStorage.setItem('viajes', JSON.stringify(viajes)); }, [viajes]);
            useEffect(() => { localStorage.setItem('clientes', JSON.stringify(clientes)); }, [clientes]);
            useEffect(() => { localStorage.setItem('deudas', JSON.stringify(deudas)); }, [deudas]);
            useEffect(() => { localStorage.setItem('pagosDeudas', JSON.stringify(pagosDeudas)); }, [pagosDeudas]);
            useEffect(() => { localStorage.setItem('diezmos', JSON.stringify(diezmos)); }, [diezmos]);
            useEffect(() => { localStorage.setItem('cuentasFinancieras', JSON.stringify(cuentasFinancieras)); }, [cuentasFinancieras]);
            useEffect(() => { localStorage.setItem('notas', JSON.stringify(notas)); }, [notas]);
            useEffect(() => { localStorage.setItem('categorias', JSON.stringify(categorias)); }, [categorias]);

            const getQuincenaActual = () => {
                const hoy = new Date();
                const dia = hoy.getDate();
                const mes = hoy.getMonth();
                const a√±o = hoy.getFullYear();
                
                if (dia <= 15) {
                    return {
                        inicio: new Date(a√±o, mes, 1),
                        fin: new Date(a√±o, mes, 15),
                        texto: `1-15 de ${hoy.toLocaleString('es', { month: 'long' })}`
                    };
                } else {
                    const ultimoDia = new Date(a√±o, mes + 1, 0).getDate();
                    return {
                        inicio: new Date(a√±o, mes, 16),
                        fin: new Date(a√±o, mes, ultimoDia),
                        texto: `16-${ultimoDia} de ${hoy.toLocaleString('es', { month: 'long' })}`
                    };
                }
            };

            const calcularBalanceQuincena = () => {
                const quincena = getQuincenaActual();
                const registrosQuincena = registros.filter(r => {
                    const fecha = new Date(r.fecha);
                    return fecha >= quincena.inicio && fecha <= quincena.fin;
                });

                const ingresos = registrosQuincena.filter(r => r.tipo === 'Ingreso').reduce((sum, r) => sum + parseFloat(r.monto), 0);
                const gastos = registrosQuincena.filter(r => r.tipo === 'Gasto').reduce((sum, r) => sum + parseFloat(r.monto), 0);

                return { ingresos, gastos, ganancia: ingresos - gastos, quincena: quincena.texto };
            };

            const LoginScreen = () => (
                <div className={`min-h-screen flex items-center justify-center p-4 ${darkMode ? 'bg-gray-900' : 'bg-gradient-to-br from-emerald-50 to-blue-50'}`}>
                    <div className={`w-full max-w-md ${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-2xl shadow-2xl p-8`}>
                        <div className="text-center mb-8">
                            {appSettings.logo ? (
                                <img src={appSettings.logo} alt="Logo" className="w-32 h-32 mx-auto mb-4 rounded-full object-cover shadow-lg" />
                            ) : (
                                <div className="w-32 h-32 mx-auto mb-4 bg-gradient-to-br from-emerald-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg">
                                    <Icons.Calendar />
                                </div>
                            )}
                            <h1 className={`text-2xl font-bold mb-2 whitespace-pre-line ${darkMode ? 'text-white' : 'text-gray-800'}`}>
                                {appSettings.nombre}
                            </h1>
                            <p className={`text-lg ${darkMode ? 'text-emerald-400' : 'text-emerald-600'} font-semibold mb-1`}>
                                {appSettings.eslogan}
                            </p>
                            <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{appSettings.detalle}</p>
                        </div>
                        <button
                            onClick={() => setCurrentView('dashboard')}
                            className="w-full bg-gradient-to-r from-emerald-500 to-blue-600 text-white py-4 rounded-xl font-semibold text-lg hover:shadow-lg transform hover:scale-105 transition"
                        >
                            üöÄ Entrar
                        </button>
                    </div>
                </div>
            );

            const Dashboard = () => {
                const balance = calcularBalanceQuincena();
                return (
                    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} pb-20`}>
                        <div className={`${darkMode ? 'bg-gradient-to-r from-emerald-700 to-blue-700' : 'bg-gradient-to-r from-emerald-500 to-blue-600'} text-white p-6 rounded-b-3xl shadow-lg`}>
                            <h1 className="text-2xl font-bold mb-4">üìä Dashboard</h1>
                            <div className={`${darkMode ? 'bg-gray-800' : 'bg-white/20'} backdrop-blur-sm rounded-xl p-4`}>
                                <p className="text-sm opacity-90 mb-2">Quincena: {balance.quincena}</p>
                                <div className="grid grid-cols-3 gap-3">
                                    <div><p className="text-xs opacity-80">Ingresos</p><p className="text-lg font-bold">Q{balance.ingresos.toFixed(2)}</p></div>
                                    <div><p className="text-xs opacity-80">Gastos</p><p className="text-lg font-bold">Q{balance.gastos.toFixed(2)}</p></div>
                                    <div><p className="text-xs opacity-80">Ganancia</p><p className="text-lg font-bold">Q{balance.ganancia.toFixed(2)}</p></div>
                                </div>
                            </div>
                        </div>
                        <div className="p-4 grid grid-cols-2 gap-4 mt-4">
                            {[
                                { view: 'diezmos', icon: 'DollarSign', label: 'Diezmos', color: 'emerald' },
                                { view: 'notas', icon: 'FileText', label: 'Notas', color: 'blue' },
                                { view: 'infoFinanciera', icon: 'FileText', label: 'Info Financiera', color: 'yellow' },
                                { view: 'ajustes', icon: 'Settings', label: 'Ajustes', color: 'gray' }
                            ].map(({ view, icon, label, color }) => {
                                const Icon = Icons[icon];
                                return (
                                    <button key={view} onClick={() => setCurrentView(view)} className={`${darkMode ? 'bg-gray-800' : 'bg-white'} p-6 rounded-xl shadow-lg hover:shadow-xl transition`}>
                                        <div className={`w-8 h-8 mb-2 mx-auto text-${color}-${darkMode ? '400' : '600'}`}><Icon /></div>
                                        <p className={`font-semibold text-center ${darkMode ? 'text-white' : 'text-gray-800'}`}>{label}</p>
                                    </button>
                                );
                            })}
                        </div>
                    </div>
                );
            };

            const RegistrosDiariosScreen = () => {
                const [showForm, setShowForm] = useState(false);
                const [editingId, setEditingId] = useState(null);
                const [formData, setFormData] = useState({ fecha: new Date().toISOString().split('T')[0], monto: '', tipo: 'Ingreso', categoria: '', detalle: '' });
                const [nuevaCategoria, setNuevaCategoria] = useState('');

                const handleSubmit = () => {
                    let catFinal = formData.categoria;
                    if (formData.categoria === 'Otros' && nuevaCategoria) {
                        if (!categorias.includes(nuevaCategoria)) setCategorias([...categorias, nuevaCategoria]);
                        catFinal = nuevaCategoria;
                    }
                    
                    if (editingId) {
                        setRegistros(registros.map(r => r.id === editingId ? { ...formData, categoria: catFinal, id: editingId } : r));
                    } else {
                        setRegistros([...registros, { ...formData, categoria: catFinal, id: Date.now() }]);
                    }
                    
                    setShowForm(false);
                    setEditingId(null);
                    setFormData({ fecha: new Date().toISOString().split('T')[0], monto: '', tipo: 'Ingreso', categoria: '', detalle: '' });
                    setNuevaCategoria('');
                };

                return (
                    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} pb-20`}>
                        <div className={`${darkMode ? 'bg-gradient-to-r from-emerald-700 to-blue-700' : 'bg-gradient-to-r from-emerald-500 to-blue-600'} text-white p-6`}>
                            <h1 className="text-2xl font-bold">üìñ Libro Diario</h1>
                        </div>
                        <div className="p-4">
                            <button onClick={() => setShowForm(true)} className="w-full bg-gradient-to-r from-emerald-500 to-blue-600 text-white py-4 rounded-xl font-semibold mb-4 flex items-center justify-center gap-2">
                                <Icons.Plus /> A√±adir Registro
                            </button>

                            {showForm && (
                                <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow-lg mb-4`}>
                                    <h3 className={`font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>{editingId ? 'Editar' : 'Nuevo'} Registro</h3>
                                    <input type="date" value={formData.fecha} onChange={(e) => setFormData({ ...formData, fecha: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="number" placeholder="Monto (Q)" value={formData.monto} onChange={(e) => setFormData({ ...formData, monto: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <select value={formData.tipo} onChange={(e) => setFormData({ ...formData, tipo: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`}>
                                        <option>Ingreso</option>
                                        <option>Gasto</option>
                                    </select>
                                    <select value={formData.categoria} onChange={(e) => setFormData({ ...formData, categoria: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`}>
                                        <option value="">Seleccionar categor√≠a</option>
                                        {categorias.map(cat => <option key={cat} value={cat}>{cat}</option>)}
                                    </select>
                                    {formData.categoria === 'Otros' && (
                                        <input type="text" placeholder="Nueva categor√≠a" value={nuevaCategoria} onChange={(e) => setNuevaCategoria(e.target.value)} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    )}
                                    <textarea placeholder="Detalle" value={formData.detalle} onChange={(e) => setFormData({ ...formData, detalle: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} rows="3" />
                                    <div className="flex gap-2">
                                        <button onClick={handleSubmit} className="flex-1 bg-emerald-500 text-white py-3 rounded-lg font-semibold">{editingId ? 'Actualizar' : 'Guardar'}</button>
                                        <button onClick={() => { setShowForm(false); setEditingId(null); }} className={`flex-1 ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-800'} py-3 rounded-lg font-semibold`}>Cancelar</button>
                                    </div>
                                </div>
                            )}

                            <div className="space-y-3">
                                {[...registros].sort((a, b) => new Date(b.fecha) - new Date(a.fecha)).map(registro => (
                                    <div key={registro.id} className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow`}>
                                        <div className="flex justify-between items-start mb-2">
                                            <div>
                                                <p className={`font-semibold ${registro.tipo === 'Ingreso' ? 'text-emerald-600' : 'text-red-600'}`}>
                                                    {registro.tipo === 'Ingreso' ? 'üìà' : 'üìâ'} Q{parseFloat(registro.monto).toFixed(2)}
                                                </p>
                                                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{new Date(registro.fecha).toLocaleDateString('es-GT')}</p>
                                            </div>
                                            <div className="flex gap-2">
                                                <button onClick={() => { setFormData(registro); setEditingId(registro.id); setShowForm(true); }} className="text-blue-600"><Icons.Edit2 /></button>
                                                <button onClick={() => setRegistros(registros.filter(r => r.id !== registro.id))} className="text-red-600"><Icons.Trash2 /></button>
                                            </div>
                                        </div>
                                        <p className={`text-sm ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}><span className="font-semibold">Categor√≠a:</span> {registro.categoria}</p>
                                        <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{registro.detalle}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            const ViajesScreen = () => {
                const [showForm, setShowForm] = useState(false);
                const [formData, setFormData] = useState({ destinoInicial: '', destinoFinal: '', cliente: '', fecha: '', costo: '', estado: 'Cotizado' });

                const handleSubmit = () => {
                    setViajes([...viajes, { ...formData, id: Date.now() }]);
                    setShowForm(false);
                    setFormData({ destinoInicial: '', destinoFinal: '', cliente: '', fecha: '', costo: '', estado: 'Cotizado' });
                };

                const marcarRealizado = (viaje) => {
                    setViajes(viajes.map(v => v.id === viaje.id ? { ...v, estado: 'Realizado' } : v));
                    setRegistros([...registros, { id: Date.now(), fecha: viaje.fecha, monto: viaje.costo, tipo: 'Ingreso', categoria: 'Privado', detalle: `Viaje a ${viaje.destinoFinal}` }]);
                };

                return (
                    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} pb-20`}>
                        <div className={`${darkMode ? 'bg-gradient-to-r from-emerald-700 to-blue-700' : 'bg-gradient-to-r from-emerald-500 to-blue-600'} text-white p-6`}>
                            <h1 className="text-2xl font-bold">üöó Viajes</h1>
                        </div>
                        <div className="p-4">
                            <button onClick={() => setShowForm(true)} className="w-full bg-gradient-to-r from-emerald-500 to-blue-600 text-white py-4 rounded-xl font-semibold mb-4 flex items-center justify-center gap-2">
                                <Icons.Plus /> Nuevo Viaje
                            </button>

                            {showForm && (
                                <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow-lg mb-4`}>
                                    <h3 className={`font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>Nuevo Viaje</h3>
                                    <input type="text" placeholder="Destino inicial" value={formData.destinoInicial} onChange={(e) => setFormData({ ...formData, destinoInicial: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="text" placeholder="Destino final" value={formData.destinoFinal} onChange={(e) => setFormData({ ...formData, destinoFinal: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="text" placeholder="Cliente" value={formData.cliente} onChange={(e) => setFormData({ ...formData, cliente: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="date" value={formData.fecha} onChange={(e) => setFormData({ ...formData, fecha: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="number" placeholder="Costo (Q)" value={formData.costo} onChange={(e) => setFormData({ ...formData, costo: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <div className="flex gap-2">
                                        <button onClick={handleSubmit} className="flex-1 bg-emerald-500 text-white py-3 rounded-lg font-semibold">Guardar</button>
                                        <button onClick={() => setShowForm(false)} className={`flex-1 ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-800'} py-3 rounded-lg font-semibold`}>Cancelar</button>
                                    </div>
                                </div>
                            )}

                            <div className="space-y-3">
                                {viajes.map(viaje => (
                                    <div key={viaje.id} className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow`}>
                                        <div className="flex justify-between items-start mb-2">
                                            <div>
                                                <p className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{viaje.destinoInicial} ‚Üí {viaje.destinoFinal}</p>
                                                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Cliente: {viaje.cliente}</p>
                                            </div>
                                            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${viaje.estado === 'Cotizado' ? 'bg-yellow-100 text-yellow-800' : viaje.estado === 'Programado' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'}`}>{viaje.estado}</span>
                                        </div>
                                        <p className="text-lg font-bold text-emerald-600 mb-2">Q{parseFloat(viaje.costo).toFixed(2)}</p>
                                        {viaje.estado !== 'Realizado' && (
                                            <button onClick={() => marcarRealizado(viaje)} className="w-full bg-emerald-500 text-white py-2 rounded-lg font-semibold flex items-center justify-center gap-2">
                                                <Icons.Check /> Marcar como Realizado
                                            </button>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            const CuentasPorCobrarScreen = () => {
                const [showClientForm, setShowClientForm] = useState(false);
                const [showDeudaForm, setShowDeudaForm] = useState(false);
                const [showPagoForm, setShowPagoForm] = useState(false);
                const [selectedCliente, setSelectedCliente] = useState(null);
                const [selectedDeuda, setSelectedDeuda] = useState(null);
                const [clienteForm, setClienteForm] = useState({ nombre: '', telefono: '' });
                const [deudaForm, setDeudaForm] = useState({ concepto: '', monto: '' });
                const [pagoForm, setPagoForm] = useState({ monto: '', fecha: new Date().toISOString().split('T')[0] });

                const handleClienteSubmit = () => {
                    setClientes([...clientes, { ...clienteForm, id: Date.now() }]);
                    setShowClientForm(false);
                    setClienteForm({ nombre: '', telefono: '' });
                };

                const handleDeudaSubmit = () => {
                    setDeudas([...deudas, { ...deudaForm, id: Date.now(), clienteId: selectedCliente.id, saldo: parseFloat(deudaForm.monto) }]);
                    setShowDeudaForm(false);
                    setSelectedCliente(null);
                    setDeudaForm({ concepto: '', monto: '' });
                };

                const handlePagoSubmit = () => {
                    const pago = { ...pagoForm, id: Date.now(), deudaId: selectedDeuda.id };
                    setPagosDeudas([...pagosDeudas, pago]);
                    const pagosTotal = [...pagosDeudas, pago].filter(p => p.deudaId === selectedDeuda.id).reduce((sum, p) => sum + parseFloat(p.monto), 0);
                    setDeudas(deudas.map(d => d.id === selectedDeuda.id ? { ...d, saldo: parseFloat(d.monto) - pagosTotal } : d));
                    setShowPagoForm(false);
                    setSelectedDeuda(null);
                    setPagoForm({ monto: '', fecha: new Date().toISOString().split('T')[0] });
                };

                return (
                    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} pb-20`}>
                        <div className={`${darkMode ? 'bg-gradient-to-r from-emerald-700 to-blue-700' : 'bg-gradient-to-r from-emerald-500 to-blue-600'} text-white p-6`}>
                            <h1 className="text-2xl font-bold">üë• Cuentas por Cobrar</h1>
                        </div>
                        <div className="p-4">
                            <button onClick={() => setShowClientForm(true)} className="w-full bg-gradient-to-r from-emerald-500 to-blue-600 text-white py-4 rounded-xl font-semibold mb-4 flex items-center justify-center gap-2">
                                <Icons.Plus /> Nuevo Cliente
                            </button>

                            {showClientForm && (
                                <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow-lg mb-4`}>
                                    <h3 className={`font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>Nuevo Cliente</h3>
                                    <input type="text" placeholder="Nombre" value={clienteForm.nombre} onChange={(e) => setClienteForm({ ...clienteForm, nombre: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="text" placeholder="Tel√©fono" value={clienteForm.telefono} onChange={(e) => setClienteForm({ ...clienteForm, telefono: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <div className="flex gap-2">
                                        <button onClick={handleClienteSubmit} className="flex-1 bg-emerald-500 text-white py-3 rounded-lg font-semibold">Guardar</button>
                                        <button onClick={() => setShowClientForm(false)} className={`flex-1 ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-800'} py-3 rounded-lg font-semibold`}>Cancelar</button>
                                    </div>
                                </div>
                            )}

                            <div className="space-y-3">
                                {clientes.map(cliente => {
                                    const deudasCliente = deudas.filter(d => d.clienteId === cliente.id);
                                    const totalDeuda = deudasCliente.reduce((sum, d) => sum + d.saldo, 0);
                                    return (
                                        <div key={cliente.id} className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow`}>
                                            <div className="flex justify-between items-start mb-3">
                                                <div>
                                                    <p className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{cliente.nombre}</p>
                                                    <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{cliente.telefono}</p>
                                                </div>
                                                <p className="text-red-600 font-bold">Q{totalDeuda.toFixed(2)}</p>
                                            </div>
                                            <button onClick={() => { setSelectedCliente(cliente); setShowDeudaForm(true); }} className="w-full bg-blue-500 text-white py-2 rounded-lg text-sm font-semibold mb-2">+ A√±adir Deuda</button>
                                            {deudasCliente.map(deuda => (
                                                <div key={deuda.id} className={`${darkMode ? 'bg-gray-700' : 'bg-gray-50'} rounded-lg p-3 mb-2`}>
                                                    <div className="flex justify-between items-start mb-2">
                                                        <div>
                                                            <p className={`text-sm font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{deuda.concepto}</p>
                                                            <p className={`text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Total: Q{parseFloat(deuda.monto).toFixed(2)}</p>
                                                        </div>
                                                        <p className="text-red-600 font-bold text-sm">Q{deuda.saldo.toFixed(2)}</p>
                                                    </div>
                                                    <button onClick={() => { setSelectedDeuda(deuda); setShowPagoForm(true); }} className="w-full bg-emerald-500 text-white py-1 rounded text-xs font-semibold">Registrar Pago</button>
                                                </div>
                                            ))}
                                        </div>
                                    );
                                })}
                            </div>

                            {showDeudaForm && selectedCliente && (
                                <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
                                    <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 max-w-md w-full`}>
                                        <h3 className={`font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>Nueva Deuda - {selectedCliente.nombre}</h3>
                                        <input type="text" placeholder="Concepto" value={deudaForm.concepto} onChange={(e) => setDeudaForm({ ...deudaForm, concepto: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                        <input type="number" placeholder="Monto (Q)" value={deudaForm.monto} onChange={(e) => setDeudaForm({ ...deudaForm, monto: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                        <div className="flex gap-2">
                                            <button onClick={handleDeudaSubmit} className="flex-1 bg-emerald-500 text-white py-3 rounded-lg font-semibold">Guardar</button>
                                            <button onClick={() => { setShowDeudaForm(false); setSelectedCliente(null); }} className={`flex-1 ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-800'} py-3 rounded-lg font-semibold`}>Cancelar</button>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {showPagoForm && selectedDeuda && (
                                <div className="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
                                    <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 max-w-md w-full`}>
                                        <h3 className={`font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>Registrar Pago</h3>
                                        <p className={`text-sm mb-3 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Saldo: Q{selectedDeuda.saldo.toFixed(2)}</p>
                                        <input type="number" placeholder="Monto del pago (Q)" value={pagoForm.monto} onChange={(e) => setPagoForm({ ...pagoForm, monto: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                        <input type="date" value={pagoForm.fecha} onChange={(e) => setPagoForm({ ...pagoForm, fecha: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                        <div className="flex gap-2">
                                            <button onClick={handlePagoSubmit} className="flex-1 bg-emerald-500 text-white py-3 rounded-lg font-semibold">Guardar</button>
                                            <button onClick={() => { setShowPagoForm(false); setSelectedDeuda(null); }} className={`flex-1 ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-800'} py-3 rounded-lg font-semibold`}>Cancelar</button>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            };

            const DiezmosScreen = () => {
                const balance = calcularBalanceQuincena();
                const diezmoSugerido = balance.ganancia * 0.1;
                const [showForm, setShowForm] = useState(false);
                const [formData, setFormData] = useState({ monto: '', fecha: new Date().toISOString().split('T')[0], tipo: 'Transferencia' });

                const quincena = getQuincenaActual();
                const diezmosPagadosQuincena = diezmos.filter(d => {
                    const fecha = new Date(d.fecha);
                    return fecha >= quincena.inicio && fecha <= quincena.fin;
                }).reduce((sum, d) => sum + parseFloat(d.monto), 0);

                const diezmoFaltante = Math.max(0, diezmoSugerido - diezmosPagadosQuincena);

                const handleSubmit = () => {
                    setDiezmos([...diezmos, { ...formData, id: Date.now(), quincena: balance.quincena }]);
                    setShowForm(false);
                    setFormData({ monto: '', fecha: new Date().toISOString().split('T')[0], tipo: 'Transferencia' });
                };

                return (
                    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} pb-20`}>
                        <div className={`${darkMode ? 'bg-gradient-to-r from-emerald-700 to-blue-700' : 'bg-gradient-to-r from-emerald-500 to-blue-600'} text-white p-6`}>
                            <h1 className="text-2xl font-bold mb-4">üí∞ Diezmos</h1>
                            <div className={`${darkMode ? 'bg-gray-800' : 'bg-white/20'} backdrop-blur-sm rounded-xl p-4`}>
                                <p className="text-sm opacity-90 mb-2">Quincena: {balance.quincena}</p>
                                <p className="text-2xl font-bold mb-2">Sugerido: Q{diezmoSugerido.toFixed(2)}</p>
                                <p className="text-sm">Pagado: Q{diezmosPagadosQuincena.toFixed(2)}</p>
                                <p className="text-sm">Faltante: Q{diezmoFaltante.toFixed(2)}</p>
                            </div>
                        </div>
                        <div className="p-4">
                            <button onClick={() => setShowForm(true)} className="w-full bg-gradient-to-r from-emerald-500 to-blue-600 text-white py-4 rounded-xl font-semibold mb-4 flex items-center justify-center gap-2">
                                <Icons.Plus /> Registrar Pago
                            </button>

                            {showForm && (
                                <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow-lg mb-4`}>
                                    <h3 className={`font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>Nuevo Pago</h3>
                                    <input type="number" placeholder="Monto (Q)" value={formData.monto} onChange={(e) => setFormData({ ...formData, monto: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="date" value={formData.fecha} onChange={(e) => setFormData({ ...formData, fecha: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <select value={formData.tipo} onChange={(e) => setFormData({ ...formData, tipo: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`}>
                                        <option>Transferencia</option>
                                        <option>Efectivo</option>
                                    </select>
                                    <div className="flex gap-2">
                                        <button onClick={handleSubmit} className="flex-1 bg-emerald-500 text-white py-3 rounded-lg font-semibold">Guardar</button>
                                        <button onClick={() => setShowForm(false)} className={`flex-1 ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-800'} py-3 rounded-lg font-semibold`}>Cancelar</button>
                                    </div>
                                </div>
                            )}

                            <div className="space-y-3">
                                <h3 className={`font-bold ${darkMode ? 'text-white' : 'text-gray-800'}`}>Historial</h3>
                                {[...diezmos].sort((a, b) => new Date(b.fecha) - new Date(a.fecha)).map(pago => (
                                    <div key={pago.id} className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow`}>
                                        <div className="flex justify-between items-start">
                                            <div>
                                                <p className="font-semibold text-emerald-600">Q{parseFloat(pago.monto).toFixed(2)}</p>
                                                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{new Date(pago.fecha).toLocaleDateString('es-GT')} - {pago.tipo}</p>
                                            </div>
                                            <button onClick={() => setDiezmos(diezmos.filter(d => d.id !== pago.id))} className="text-red-600"><Icons.Trash2 /></button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            const InfoFinancieraScreen = () => {
                const [showForm, setShowForm] = useState(false);
                const [formData, setFormData] = useState({ banco: '', nombreCuenta: '', numeroCuenta: '', notas: '' });

                const handleSubmit = () => {
                    setCuentasFinancieras([...cuentasFinancieras, { ...formData, id: Date.now() }]);
                    setShowForm(false);
                    setFormData({ banco: '', nombreCuenta: '', numeroCuenta: '', notas: '' });
                };

                return (
                    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} pb-20`}>
                        <div className={`${darkMode ? 'bg-gradient-to-r from-emerald-700 to-blue-700' : 'bg-gradient-to-r from-emerald-500 to-blue-600'} text-white p-6`}>
                            <h1 className="text-2xl font-bold">üè¶ Info Financiera</h1>
                        </div>
                        <div className="p-4">
                            <button onClick={() => setShowForm(true)} className="w-full bg-gradient-to-r from-emerald-500 to-blue-600 text-white py-4 rounded-xl font-semibold mb-4 flex items-center justify-center gap-2">
                                <Icons.Plus /> Nueva Cuenta
                            </button>

                            {showForm && (
                                <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow-lg mb-4`}>
                                    <h3 className={`font-bold mb-4 ${darkMode ? 'text-white' : 'text-gray-800'}`}>Nueva Cuenta</h3>
                                    <input type="text" placeholder="Banco" value={formData.banco} onChange={(e) => setFormData({ ...formData, banco: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="text" placeholder="Nombre de cuenta" value={formData.nombreCuenta} onChange={(e) => setFormData({ ...formData, nombreCuenta: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <input type="text" placeholder="N√∫mero de cuenta" value={formData.numeroCuenta} onChange={(e) => setFormData({ ...formData, numeroCuenta: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} />
                                    <textarea placeholder="Notas" value={formData.notas} onChange={(e) => setFormData({ ...formData, notas: e.target.value })} className={`w-full p-3 border rounded-lg mb-3 ${darkMode ? 'bg-gray-700 text-white border-gray-600' : 'bg-white'}`} rows="3" />
                                    <div className="flex gap-2">
                                        <button onClick={handleSubmit} className="flex-1 bg-emerald-500 text-white py-3 rounded-lg font-semibold">Guardar</button>
                                        <button onClick={() => setShowForm(false)} className={`flex-1 ${darkMode ? 'bg-gray-700 text-white' : 'bg-gray-300 text-gray-800'} py-3 rounded-lg font-semibold`}>Cancelar</button>
                                    </div>
                                </div>
                            )}

                            <div className="space-y-3">
                                {cuentasFinancieras.map(cuenta => (
                                    <div key={cuenta.id} className={`${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-xl p-4 shadow`}>
                                        <div className="flex justify-between">
                                            <div>
                                                <p className={`font-semibold ${darkMode ? 'text-white' : 'text-gray-800'}`}>{cuenta.banco}</p>
                                                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{cuenta.nombreCuenta}</p>
                                                <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>{cuenta.numeroCuenta}</p>
                                            </div>
                                            <button onClick={() => setCuentasFinancieras(cuentasFinancieras.filter(c => c.id !== cuenta.id))} className="text-red-600"><Icons.Trash2 /></button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            const NotasScreen = () => {
                const [showForm, setShowForm] = useState(false);
                const [formData, setFormData] = useState({ titulo: '', contenido: '' });

                const handleSubmit = () => {
                    setNotas([...notas, { ...formData, id: Date.now(), fecha: new Date().toISOString() }]);
                    setShowForm(false);
                    setFormData({ titulo: '', contenido: '' });
                };

                return (
                    <div className={`min-h-screen ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} pb-20`}>
                        <div className={`${darkMode ? 'bg-gradient-to-r from-emerald-700 to-blue-700' : 'bg-gradient-to-r from-emerald-500 to-blue-600'} text
